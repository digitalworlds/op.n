<!DOCTYPE html>
<html>
<head>
	<title>op.n</title>
	<meta charset="utf-8"/>
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
	
	<link rel="shortcut icon" href="img/logo.png" />
	<link rel="icon" href="img/logo.png" /> 
	<link rel="apple-touch-icon" href="img/logo.png" />
	
	<meta property="og:url" content="" />
	<meta property="og:title" content="op.n | Web OS" />
	<meta property="og:description" content="An open-source web-based operating system that you can carry in all your devices." />
	<meta property="og:type" content="website" />
	<meta property="og:image:width" content="100" />
	<meta property="og:image:height" content="100" />
    <meta property="og:image" content="img/logo.png" />
	<meta property="og:image:type" content="image/png" />
	
	<style>
        @-ms-viewport { width: 100vw ; min-zoom: 100% ; zoom: 100% ; }          @viewport { width: 100vw ; min-zoom: 100%; zoom: 100% ; }
        @-ms-viewport { user-zoom: fixed ; min-zoom: 100% ; }                   @viewport { user-zoom: fixed ; min-zoom: 100% ; }
	</style>
	<script type="text/javascript" src="js/opn.js"></script>
	<script type="text/javascript">
	var my_program=function()
	{
		if(opn.static && location.search.indexOf('?file/')==0)
		{
			let end=location.search.indexOf('/',6);
			let command='';
			if(end==-1)end=undefined;
			else command=location.search.substring(end);
			let embed=false;if(command.indexOf('/embed')==0)embed=true;
			let oid=location.search.substring(6,end);
			if(oid.indexOf('@')==-1)oid=oid+'@'+opn.cloudhost;
			
			opn.cloud.getObject(oid).whenReady().then((o)=>{
				document.title=o.getSystemProperty('NAME');
				let icon=o.getSystemProperty('ICON');
				if(icon){
					let links=document.getElementsByTagName('link');
					for(let i=0;i<links.length;i++)links[i].href=o.id.getIconURL();
				}
				new opn.App().load(opn.viewers['OS']).then((Assets)=>{
					let os=new Assets.opnOS({parentDiv:opn.getScreen()});	
					
					let app=null;
					
					if(command.indexOf('/code')==0){
						app=os.openApp({initapp:true,appID:opn.viewers['Code'],input:o});
					}
					else if(command.indexOf('/api')==0){
						app=os.openApp({initapp:true,appID:opn.viewers['API'],input:oid});
					}else{
						
						if(o.getSystemProperty('OPEN')){
							app=os.openApp({initapp:true,appID:o.getSystemProperty('OPEN'),input:oid});
						} else if (o.getSystemProperty('CLASS')){
							let c=o.getSystemProperty('CLASS');
							if(c=='List'){
								app=os.openApp({initapp:true,appID:opn.viewer['List'],input:oid});
							}else if(c=='Image'){
								app=os.openApp({initapp:true,appID:opn.viewer['Image'],input:oid});
							}else if(c=='User'){
								app=os.openApp({initapp:true,appID:opn.viewer['User'],input:oid});
							}else{
								app=os.openApp({initapp:true,fullscreen:embed,appID:oid});
							}
						}
						else {
							app=os.openApp({initapp:true,fullscreen:embed,appID:oid});
						}
					}
					app.getWindow().maximize();
				});
			}).otherwise(()=>{
				console.log('This object is not available');
			});
			return;
		}
		if(opn.redirectServerSite){location.href=opn.redirectServerSite;return}
		new opn.App().load(opn.landing);	
	}
	</script>
</head>
<body onload="opn.run(my_program,{loadingLogo:true})" style="margin:0px;background:#fff;color:#888;"></body>
</html>